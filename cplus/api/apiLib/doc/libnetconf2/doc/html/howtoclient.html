<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libnetconf2: Client sessions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cesnet-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libnetconf2<span id="projectnumber">&#160;2.1.37</span>
   </div>
   <div id="projectbrief">NETCONF server and client library in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('howtoclient.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Client sessions</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To connect to a NETCONF server, a NETCONF session must be established, which requires a working transport session. It is possible to create NETCONF sessions with SSH (using <em>libssh</em>) or TLS (using <em>libssl/libcrypto</em>) as the underlying transport protocol. It is also possible to establish the transport protocol outside <em>libnetconf2</em> and then provide these file descriptors (FD) for full NETCONF session creation.</p>
<p>There are a lot of options for both an SSH and a TLS client. All of them have setters and getters so that there is no need to duplicate them in a client.</p>
<p><a class="anchor" id="howtoclientssh"></a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
SSH</h1>
<p>Connecting to a server using SSH does not strictly require to set any options, there are sensible default values for all the basic ones. Except all the SSH options, optionally some authetication callbacks can be set, which are particulary useful in automated clients (passwords cannot be asked a user) or simply if any additional information is retrieved some other way than from standard terminal input.</p>
<p>Having the default options or changing any unsuitable ones, there are 2 functions to use for a new server connection. <a class="el" href="group__client__ssh.html#gac810984f6f69e2069704c53eefb85d6b" title="Connect to the NETCONF server using SSH transport (via libssh).">nc_connect_ssh()</a> is the standard function that creates sessions using the set options. If there are some options, which cannot be changed with the provided API, there is <a class="el" href="group__client__ssh.html#ga49b62abe61f6eaf2dea136a42808957f" title="Connect to the NETCONF server using the provided SSH (libssh) session.">nc_connect_libssh()</a> available. It requires a <em>libssh</em> session, in which all the SSH options can be modified and even the connection established. This allows for full customization and should fit any specific situation.</p>
<p>New NETCONF sessions can also be created on existing authenticated SSH sessions. There is a new SSH channel needed, on which the NETCONF session is then created. Use <a class="el" href="group__client__ssh.html#ga8527597862a815de85f08d0d1db88dcd" title="Create another NETCONF session on existing SSH session using separated SSH channel.">nc_connect_ssh_channel()</a> for this purpose.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Functions List</h2>
<p>Available in <b>nc_client.h</b>.</p>
<ul>
<li><a class="el" href="group__client__ssh.html#ga5ae08201dc77968e070bfcf2a38c6577" title="Set SSH authentication hostkey check (knownhosts) callback.">nc_client_ssh_set_auth_hostkey_check_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#gaac5d596105699eac6147562ff8da8bd0" title="Get currently set SSH authentication hostkey check (knownhosts) callback and its private data previou...">nc_client_ssh_get_auth_hostkey_check_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#gaeaa72b5c11147878014b764e06b8a84b" title="Set SSH password authentication callback.">nc_client_ssh_set_auth_password_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#gaf260a13664e20243fd66e96a4d97a0de" title="Get currently set SSH password authentication callback and its private data previously set by nc_clie...">nc_client_ssh_get_auth_password_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#ga8cdc998a93eeebd411c523fcdb2a1b80" title="Set SSH interactive authentication callback.">nc_client_ssh_set_auth_interactive_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#ga6e0912657dc05edd4521554678e35394" title="Get currently set SSH interactive authentication callback and its private data previously set by nc_c...">nc_client_ssh_get_auth_interactive_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#ga2ebe8b3af12505b95d3deb705e1a5fa7" title="Set SSH publickey authentication encrypted private key passphrase callback.">nc_client_ssh_set_auth_privkey_passphrase_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#gafaee1da571a6a0d1a257b2c723525809" title="Get currently set SSH publickey authentication encrypted private key passphrase callback and its priv...">nc_client_ssh_get_auth_privkey_passphrase_clb()</a></li>
<li><a class="el" href="group__client__ssh.html#ga676977cabea600fa524cff1ef9aeb951" title="Add an SSH public and private key pair to be used for client authentication.">nc_client_ssh_add_keypair()</a></li>
<li><a class="el" href="group__client__ssh.html#gae28cec314b42004cbc64279bde4a9dad" title="Remove an SSH public and private key pair that was used for client authentication.">nc_client_ssh_del_keypair()</a></li>
<li><a class="el" href="group__client__ssh.html#gaf81236894c0a7e826d627674f86618ab" title="Get the number of public an private key pairs set to be used for client authentication.">nc_client_ssh_get_keypair_count()</a></li>
<li><a class="el" href="group__client__ssh.html#gafafd71069800ff71b3cbb3958b8c46ee" title="Get a specific keypair set to be used for client authentication.">nc_client_ssh_get_keypair()</a></li>
<li><a class="el" href="group__client__ssh.html#gab503461385ccb144c2d56942bca004a8" title="Set SSH authentication method preference.">nc_client_ssh_set_auth_pref()</a></li>
<li><a class="el" href="group__client__ssh.html#ga30df0b3372b956b430318683b6c4c27c" title="Get SSH authentication method preference.">nc_client_ssh_get_auth_pref()</a></li>
<li><a class="el" href="group__client__ssh.html#ga8062fd4f6c2ccc0d97233452fcc14880" title="Set client SSH username used for authentication.">nc_client_ssh_set_username()</a></li>
<li><a class="el" href="group__client__ssh.html#gaf2136a7418fffb297fa77e34db2cb83b" title="Get client SSH username used for authentication.">nc_client_ssh_get_username()</a></li>
<li><a class="el" href="group__client__ssh.html#gac810984f6f69e2069704c53eefb85d6b" title="Connect to the NETCONF server using SSH transport (via libssh).">nc_connect_ssh()</a></li>
<li><a class="el" href="group__client__ssh.html#ga49b62abe61f6eaf2dea136a42808957f" title="Connect to the NETCONF server using the provided SSH (libssh) session.">nc_connect_libssh()</a></li>
<li><a class="el" href="group__client__ssh.html#ga8527597862a815de85f08d0d1db88dcd" title="Create another NETCONF session on existing SSH session using separated SSH channel.">nc_connect_ssh_channel()</a></li>
</ul>
<p><a class="anchor" id="howtoclienttls"></a></p>
<h1><a class="anchor" id="autotoc_md5"></a>
TLS</h1>
<p>To connect to a server using TLS, there must be some client identification options set. Client must specify its certificate with a private key using <a class="el" href="group__client__tls.html#ga0761a5c4f0210956efce54e4ad3bddc0" title="Set client authentication identity - a certificate and a private key.">nc_client_tls_set_cert_key_paths()</a>. Also, the Certificate Authority of a server certificate must be considered trusted. Paths to all the trusted CA certificates can be set by <a class="el" href="group__client__tls.html#ga3b38720437af9effce749007c144a0dd" title="Set client trusted CA certificates paths.">nc_client_tls_set_trusted_ca_paths()</a>.</p>
<p>Then there are again 2 functions for connecting, <a class="el" href="group__client__tls.html#gaf93223a60de776125cbfed15788a8091" title="Connect to the NETCONF server using TLS transport (via libssl)">nc_connect_tls()</a> being the standard way of connecting. <a class="el" href="group__client__tls.html#ga1fc6103d98cacb97da10fcbcc4b255bb" title="Connect to the NETCONF server using the provided TLS (libssl) session.">nc_connect_libssl()</a> again enables to customize the TLS session in every way <em>libssl</em> allows.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Functions List</h2>
<p>Available in <b>nc_client.h</b>.</p>
<ul>
<li><a class="el" href="group__client__tls.html#ga0761a5c4f0210956efce54e4ad3bddc0" title="Set client authentication identity - a certificate and a private key.">nc_client_tls_set_cert_key_paths()</a></li>
<li><a class="el" href="group__client__tls.html#ga3169b1db61d04bc293e85a38469197e2" title="Get client authentication identity - a certificate and a private key.">nc_client_tls_get_cert_key_paths()</a></li>
<li><a class="el" href="group__client__tls.html#ga3b38720437af9effce749007c144a0dd" title="Set client trusted CA certificates paths.">nc_client_tls_set_trusted_ca_paths()</a></li>
<li><a class="el" href="group__client__tls.html#ga99a14909021769a53d8ccf94ee36f822" title="Get client trusted CA certificates paths.">nc_client_tls_get_trusted_ca_paths()</a></li>
<li><a class="el" href="group__client__tls.html#gaaed486058a97a2d00fd96ed0758823be" title="Set client Certificate Revocation List paths.">nc_client_tls_set_crl_paths()</a></li>
<li><a class="el" href="group__client__tls.html#gae941da5a2540e5853fa2484467739c99" title="Get client Certificate Revocation List paths.">nc_client_tls_get_crl_paths()</a></li>
<li><a class="el" href="group__client__tls.html#gaf93223a60de776125cbfed15788a8091" title="Connect to the NETCONF server using TLS transport (via libssl)">nc_connect_tls()</a></li>
<li><a class="el" href="group__client__tls.html#ga1fc6103d98cacb97da10fcbcc4b255bb" title="Connect to the NETCONF server using the provided TLS (libssl) session.">nc_connect_libssl()</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
FD and UNIX socket</h1>
<p>If you authenticated the connection using some tunneling software, you can pass its file descriptors to <em>libnetconf2</em> using <a class="el" href="group__client__session.html#ga66c9b10d1f303aac8d5421501798107c" title="Connect to the NETCONF server via proviaded input/output file descriptors.">nc_connect_inout()</a>, which will continue to establish a full NETCONF session. To connect locally on a UNIX socket avoiding all cryptography use <a class="el" href="group__client__session.html#gaf45a4076d3bfea089d9e8373671a66d1" title="Connect to the NETCONF server via unix socket.">nc_connect_unix()</a>.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Funtions List</h2>
<p>Available in <b>nc_client.h</b>.</p>
<ul>
<li><a class="el" href="group__client__session.html#ga66c9b10d1f303aac8d5421501798107c" title="Connect to the NETCONF server via proviaded input/output file descriptors.">nc_connect_inout()</a></li>
<li><a class="el" href="group__client__session.html#gaf45a4076d3bfea089d9e8373671a66d1" title="Connect to the NETCONF server via unix socket.">nc_connect_unix()</a></li>
</ul>
<p><a class="anchor" id="howtoclientch"></a></p>
<h1><a class="anchor" id="autotoc_md9"></a>
Call Home</h1>
<p>Call Home needs the same options set as standard SSH or TLS and the functions reflect it exactly. However, to accept a connection, the client must first specify addresses and ports, which to listen on by <a class="el" href="group__client__ch__ssh.html#ga76d89e9becfed0bdf7455c44f23673aa" title="Add a new client bind and start listening on it for SSH Call Home connections.">nc_client_ssh_ch_add_bind_listen()</a> and <a class="el" href="group__client__ch__tls.html#ga29527f80f008276ac74b2ae5dc5eaf59" title="Add a new client bind and start listening on it for TLS Call Home connections.">nc_client_tls_ch_add_bind_listen()</a>. Then connections can be accepted using <a class="el" href="group__client__ch.html#ga362a3d33b28333a01572cdde151e48b6" title="Accept a Call Home connection on any of the listening binds.">nc_accept_callhome()</a>.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Functions List</h2>
<p>Available in <b>nc_client.h</b>.</p>
<ul>
<li><a class="el" href="group__client__ch__ssh.html#gadabedf19f309a97c45f4e15d37c3b409" title="Set SSH Call Home authentication hostkey check (knownhosts) callback.">nc_client_ssh_ch_set_auth_hostkey_check_clb()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga5f412690a74246c8accbdf4a9fabda38" title="Set SSH Call Home password authentication callback.">nc_client_ssh_ch_set_auth_password_clb()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#gaa2a577ffa85ee590d4278f19af407fb7" title="Set SSH Call Home interactive authentication callback.">nc_client_ssh_ch_set_auth_interactive_clb()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga26e6e911bee1c8183faccf648bebee04" title="Set SSH Call Home publickey authentication encrypted private key passphrase callback.">nc_client_ssh_ch_set_auth_privkey_passphrase_clb()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga76d89e9becfed0bdf7455c44f23673aa" title="Add a new client bind and start listening on it for SSH Call Home connections.">nc_client_ssh_ch_add_bind_listen()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#gab4656d149d57f288907745f97fe57e10" title="Remove an SSH listening client bind.">nc_client_ssh_ch_del_bind()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga5b7d2a9ae2a6b0f6503eaf4067c8bf21" title="Add an SSH public and private key pair to be used for Call Home client authentication.">nc_client_ssh_ch_add_keypair()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga845c048631e3cde9e619409939bd5d79" title="Remove an SSH public and private key pair that was used for Call Home client authentication.">nc_client_ssh_ch_del_keypair()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga889b7f1e8d1686c512495d5cea32e5ed" title="Get the number of public an private key pairs set to be used for Call Home client authentication.">nc_client_ssh_ch_get_keypair_count()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#gab6116c2ce6cfa06a1290a9b012209525" title="Get a specific keypair set to be used for Call Home client authentication.">nc_client_ssh_ch_get_keypair()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga64e6acdd8b1816390cbecd489c5e4c77" title="Set SSH Call Home authentication method preference.">nc_client_ssh_ch_set_auth_pref()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga0b22948356a59fcfddf21c69aed82204" title="Get SSH Call Home authentication method preference.">nc_client_ssh_ch_get_auth_pref()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#gaca5805e59cb3a2263650f04fd01e656d" title="Set client Call Home SSH username used for authentication.">nc_client_ssh_ch_set_username()</a></li>
<li><a class="el" href="group__client__ch__ssh.html#ga7b41bad507543404b58994d578304033" title="Get client Call Home SSH username used for authentication.">nc_client_ssh_ch_get_username()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga29527f80f008276ac74b2ae5dc5eaf59" title="Add a new client bind and start listening on it for TLS Call Home connections.">nc_client_tls_ch_add_bind_listen()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga536cf5121a54bcb05794f30eb50ce491" title="Remove a TLS listening client bind.">nc_client_tls_ch_del_bind()</a></li>
<li><a class="el" href="group__client__ch__tls.html#gaf50a58fc9d7a782de1b9ba8b5d7a3aad" title="Set client Call Home authentication identity - a certificate and a private key.">nc_client_tls_ch_set_cert_key_paths()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga7b1d6b51fc108054c9c621a5d1d86b4d" title="Get client Call Home authentication identity - a certificate and a private key.">nc_client_tls_ch_get_cert_key_paths()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga9c8ac17727290365c36bdd6c3a536a26" title="Set client Call Home trusted CA certificates.">nc_client_tls_ch_set_trusted_ca_paths()</a></li>
<li><a class="el" href="group__client__ch__tls.html#gaed325530c650ad348c7a6e89498ab56b" title="Get client Call Home trusted CA certificates.">nc_client_tls_ch_get_trusted_ca_paths()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga37a34af46065868b525a944cdb4cd840" title="Set client Call Home Certificate Revocation Lists.">nc_client_tls_ch_set_crl_paths()</a></li>
<li><a class="el" href="group__client__ch__tls.html#ga32e88481a822b1b33f867f770c0cf500" title="Get client Call Home Certificate Revocation Lists.">nc_client_tls_ch_get_crl_paths()</a></li>
<li><a class="el" href="group__client__ch.html#ga362a3d33b28333a01572cdde151e48b6" title="Accept a Call Home connection on any of the listening binds.">nc_accept_callhome()</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Cleanup</h1>
<p>These options and the schema searchpath are stored in dynamically allocated memory. They are freed as a part of <a class="el" href="howtoinit.html">destroying the client</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="howto.html">How To ...</a></li>
    <li class="footer">Generated on Sun Jan 19 2025 19:27:10 for libnetconf2 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
