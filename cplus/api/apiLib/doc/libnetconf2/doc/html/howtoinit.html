<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libnetconf2: Init and Thread-safety Information</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cesnet-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libnetconf2<span id="projectnumber">&#160;2.1.37</span>
   </div>
   <div id="projectbrief">NETCONF server and client library in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('howtoinit.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Init and Thread-safety Information</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Before working with the library, it must be initialized using <a class="el" href="group__client.html#ga079a86d8e195364863c7e73edf53fab3" title="Initialize libssh and/or libssl/libcrypto for use in the client.">nc_client_init()</a> or <a class="el" href="group__server.html#ga9e8809a6ede71c8b5b1fa74706ecd38e" title="Initialize libssh and/or libssl/libcrypto and the server.">nc_server_init()</a>. Based on how the library was compiled, also <em>libssh</em> and/or <em>libssh</em>/_libcrypto_ are initialized (for multi-threaded use) too. To prevent any reachable memory at the end of your application, there are complementary destroy functions (<a class="el" href="group__server.html#ga09289d3ea447f5add6046a3f9ebe8287" title="Destroy any dynamically allocated libssh and/or libssl/libcrypto and server resources.">nc_server_destroy()</a> and <a class="el" href="group__client.html#ga67c9122420e67cc7a19d595392c3bc46" title="Destroy all libssh and/or libssl/libcrypto dynamic memory and the client options, for both SSH and TL...">nc_client_destroy()</a> available. If your application is multi-threaded, call the destroy functions in the main thread, after all the other threads have ended. In every other thread you should call <a class="el" href="session_8h.html#a63af405e357301bf30772e878281d3f2" title="Free all the dynamically allocated thread-specific libssl/libcrypto resources.">nc_thread_destroy()</a> just before it exits.</p>
<p>If <em>libnetconf2</em> is used in accordance with this information, there should not be memory leaks of any kind at program exit. For thread-safety details of <em>libssh</em>, <em>libssl</em>, and <em>libcrypto</em>, please refer to the corresponding project documentation. <em>libnetconf2</em> thread-safety information is below.</p>
<h2><a class="anchor" id="autotoc_md0"></a>
Client</h2>
<p>Optionally, a client can specify two alternative ways to get schemas needed when connecting with a server. The primary way is to read local files in searchpath (and its subdirectories) specified via <a class="el" href="group__client.html#ga4fb8b91a9bd992e1fe3008245302edda" title="Set location where libnetconf tries to search for YANG/YIN schemas.">nc_client_set_schema_searchpath()</a>. Alternatively, <em>libnetconf2</em> can use callback provided via <a class="el" href="group__client.html#gab0b9289a6c1ffda6b9e67045cf91a963" title="Set callback function to get missing schemas.">nc_client_set_schema_callback()</a>. If these ways do not succeed and the server implements NETCONF &lt;get-schema&gt; operation, the schema is retrieved from the server and stored localy into the searchpath (if specified) for a future use. If none of these methods succeed to load particular schema, the data from this schema are ignored during the communication with the server.</p>
<p>Besides the mentioned setters, there are many other <a class="el" href="howtoclient.html#howtoclientssh">SSH</a>, <a class="el" href="howtoclient.html#howtoclienttls">TLS</a> and <a class="el" href="howtoclient.html#howtoclientch">Call Home</a> getter/setter functions to manipulate with various settings. All these settings are internally placed in a thread-specific context so they are independent and initialized to the default values within each new thread. However, the context can be shared among the threads using <a class="el" href="group__client.html#gaa5606583253b0ecf423751bd4f652220" title="Get thread-specific client context for sharing with some other thread using nc_client_set_thread_cont...">nc_client_get_thread_context()</a> and <a class="el" href="group__client.html#gadf94877987fb872f6fa56ec1a4e1010f" title="Use the provided thread-specific client&#39;s context in the current thread.">nc_client_set_thread_context()</a> functions. In such a case, be careful and avoid concurrent execution of the mentioned setters/getters and functions creating connection (no matter if it is a standard NETCONF connection or Call Home).</p>
<p>In the client, it is always thread-safe to work with a NETCONF session in a single thread since the client settings are thread-specific as described above. Generally, one can access a session in several threads as well but there is little incentive to do so.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Server</h2>
<p>Server is <b>FULLY</b> thread-safe meaning you can set all the (thread-shared in contrast to client) options simultaneously while listening for or accepting new sessions or polling the existing ones. It is even safe to poll one session in several pollsession structures or one pollsession structure in several threads. Generally, servers can use more threads without any problems as long as they keep their workflow sane (behavior such as freeing sessions only after no thread uses them or similar).</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Functions List</h2>
<p>Available in <b>nc_client.h</b>.</p>
<ul>
<li><a class="el" href="group__client.html#ga079a86d8e195364863c7e73edf53fab3" title="Initialize libssh and/or libssl/libcrypto for use in the client.">nc_client_init()</a></li>
<li><a class="el" href="group__client.html#ga67c9122420e67cc7a19d595392c3bc46" title="Destroy all libssh and/or libssl/libcrypto dynamic memory and the client options, for both SSH and TL...">nc_client_destroy()</a></li>
<li><a class="el" href="group__client.html#ga4fb8b91a9bd992e1fe3008245302edda" title="Set location where libnetconf tries to search for YANG/YIN schemas.">nc_client_set_schema_searchpath()</a></li>
<li><a class="el" href="group__client.html#ga8d2f84cc72e6864205e464f66f941cc7" title="Get schema searchpath that was set by nc_client_set_schema_searchpath().">nc_client_get_schema_searchpath()</a></li>
<li><a class="el" href="group__client.html#gab0b9289a6c1ffda6b9e67045cf91a963" title="Set callback function to get missing schemas.">nc_client_set_schema_callback()</a></li>
<li><a class="el" href="group__client.html#gabbd7f5f1130befac0c01d6e66a02130d" title="Get callback function used to get missing schemas.">nc_client_get_schema_callback()</a></li>
<li><a class="el" href="group__client.html#gadf94877987fb872f6fa56ec1a4e1010f" title="Use the provided thread-specific client&#39;s context in the current thread.">nc_client_set_thread_context()</a></li>
<li><a class="el" href="group__client.html#gaa5606583253b0ecf423751bd4f652220" title="Get thread-specific client context for sharing with some other thread using nc_client_set_thread_cont...">nc_client_get_thread_context()</a></li>
</ul>
<p>Available in <b>nc_server.h</b>.</p>
<ul>
<li><a class="el" href="group__server.html#ga9e8809a6ede71c8b5b1fa74706ecd38e" title="Initialize libssh and/or libssl/libcrypto and the server.">nc_server_init()</a></li>
<li><a class="el" href="group__server.html#ga09289d3ea447f5add6046a3f9ebe8287" title="Destroy any dynamically allocated libssh and/or libssl/libcrypto and server resources.">nc_server_destroy()</a></li>
</ul>
<p>Available in both <b>nc_client.h</b> and <b>nc_server.h</b>.</p>
<ul>
<li><a class="el" href="session_8h.html#a63af405e357301bf30772e878281d3f2" title="Free all the dynamically allocated thread-specific libssl/libcrypto resources.">nc_thread_destroy()</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="howto.html">How To ...</a></li>
    <li class="footer">Generated on Sun Jan 19 2025 19:27:10 for libnetconf2 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
